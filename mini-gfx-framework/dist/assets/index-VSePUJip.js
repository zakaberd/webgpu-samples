(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))v(P);new MutationObserver(P=>{for(const B of P)if(B.type==="childList")for(const U of B.addedNodes)U.tagName==="LINK"&&U.rel==="modulepreload"&&v(U)}).observe(document,{childList:!0,subtree:!0});function m(P){const B={};return P.integrity&&(B.integrity=P.integrity),P.referrerPolicy&&(B.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?B.credentials="include":P.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function v(P){if(P.ep)return;P.ep=!0;const B=m(P);fetch(P.href,B)}})();function Sn(u,p){return class extends u{constructor(...m){super(...m),p(this)}}}const vn=Sn(Array,u=>u.fill(0));let L=1e-6;function Pn(u){function p(w=0,g=0){const x=new u(2);return w!==void 0&&(x[0]=w,g!==void 0&&(x[1]=g)),x}const m=p;function v(w,g,x){const t=x??new u(2);return t[0]=w,t[1]=g,t}function P(w,g){const x=g??new u(2);return x[0]=Math.ceil(w[0]),x[1]=Math.ceil(w[1]),x}function B(w,g){const x=g??new u(2);return x[0]=Math.floor(w[0]),x[1]=Math.floor(w[1]),x}function U(w,g){const x=g??new u(2);return x[0]=Math.round(w[0]),x[1]=Math.round(w[1]),x}function R(w,g=0,x=1,t){const a=t??new u(2);return a[0]=Math.min(x,Math.max(g,w[0])),a[1]=Math.min(x,Math.max(g,w[1])),a}function V(w,g,x){const t=x??new u(2);return t[0]=w[0]+g[0],t[1]=w[1]+g[1],t}function X(w,g,x,t){const a=t??new u(2);return a[0]=w[0]+g[0]*x,a[1]=w[1]+g[1]*x,a}function K(w,g){const x=w[0],t=w[1],a=g[0],s=g[1],c=Math.sqrt(x*x+t*t),e=Math.sqrt(a*a+s*s),r=c*e,h=r&&ht(w,g)/r;return Math.acos(h)}function Q(w,g,x){const t=x??new u(2);return t[0]=w[0]-g[0],t[1]=w[1]-g[1],t}const $=Q;function H(w,g){return Math.abs(w[0]-g[0])<L&&Math.abs(w[1]-g[1])<L}function C(w,g){return w[0]===g[0]&&w[1]===g[1]}function J(w,g,x,t){const a=t??new u(2);return a[0]=w[0]+x*(g[0]-w[0]),a[1]=w[1]+x*(g[1]-w[1]),a}function tt(w,g,x,t){const a=t??new u(2);return a[0]=w[0]+x[0]*(g[0]-w[0]),a[1]=w[1]+x[1]*(g[1]-w[1]),a}function k(w,g,x){const t=x??new u(2);return t[0]=Math.max(w[0],g[0]),t[1]=Math.max(w[1],g[1]),t}function O(w,g,x){const t=x??new u(2);return t[0]=Math.min(w[0],g[0]),t[1]=Math.min(w[1],g[1]),t}function at(w,g,x){const t=x??new u(2);return t[0]=w[0]*g,t[1]=w[1]*g,t}const mt=at;function ut(w,g,x){const t=x??new u(2);return t[0]=w[0]/g,t[1]=w[1]/g,t}function Gt(w,g){const x=g??new u(2);return x[0]=1/w[0],x[1]=1/w[1],x}const dt=Gt;function At(w,g,x){const t=x??new u(3),a=w[0]*g[1]-w[1]*g[0];return t[0]=0,t[1]=0,t[2]=a,t}function ht(w,g){return w[0]*g[0]+w[1]*g[1]}function et(w){const g=w[0],x=w[1];return Math.sqrt(g*g+x*x)}const Tt=et;function st(w){const g=w[0],x=w[1];return g*g+x*x}const Bt=st;function ft(w,g){const x=w[0]-g[0],t=w[1]-g[1];return Math.sqrt(x*x+t*t)}const N=ft;function W(w,g){const x=w[0]-g[0],t=w[1]-g[1];return x*x+t*t}const b=W;function ot(w,g){const x=g??new u(2),t=w[0],a=w[1],s=Math.sqrt(t*t+a*a);return s>1e-5?(x[0]=t/s,x[1]=a/s):(x[0]=0,x[1]=0),x}function Ft(w,g){const x=g??new u(2);return x[0]=-w[0],x[1]=-w[1],x}function Z(w,g){const x=g??new u(2);return x[0]=w[0],x[1]=w[1],x}const It=Z;function wt(w,g,x){const t=x??new u(2);return t[0]=w[0]*g[0],t[1]=w[1]*g[1],t}const Et=wt;function nt(w,g,x){const t=x??new u(2);return t[0]=w[0]/g[0],t[1]=w[1]/g[1],t}const Lt=nt;function Rt(w=1,g){const x=g??new u(2),t=Math.random()*2*Math.PI;return x[0]=Math.cos(t)*w,x[1]=Math.sin(t)*w,x}function y(w){const g=w??new u(2);return g[0]=0,g[1]=0,g}function S(w,g,x){const t=x??new u(2),a=w[0],s=w[1];return t[0]=a*g[0]+s*g[4]+g[12],t[1]=a*g[1]+s*g[5]+g[13],t}function d(w,g,x){const t=x??new u(2),a=w[0],s=w[1];return t[0]=g[0]*a+g[4]*s+g[8],t[1]=g[1]*a+g[5]*s+g[9],t}function n(w,g,x,t){const a=t??new u(2),s=w[0]-g[0],c=w[1]-g[1],e=Math.sin(x),r=Math.cos(x);return a[0]=s*r-c*e+g[0],a[1]=s*e+c*r+g[1],a}function i(w,g,x){const t=x??new u(2);return ot(w,t),at(t,g,t)}function o(w,g,x){const t=x??new u(2);return et(w)>g?i(w,g,t):Z(w,t)}function f(w,g,x){const t=x??new u(2);return J(w,g,.5,t)}return{create:p,fromValues:m,set:v,ceil:P,floor:B,round:U,clamp:R,add:V,addScaled:X,angle:K,subtract:Q,sub:$,equalsApproximately:H,equals:C,lerp:J,lerpV:tt,max:k,min:O,mulScalar:at,scale:mt,divScalar:ut,inverse:Gt,invert:dt,cross:At,dot:ht,length:et,len:Tt,lengthSq:st,lenSq:Bt,distance:ft,dist:N,distanceSq:W,distSq:b,normalize:ot,negate:Ft,copy:Z,clone:It,multiply:wt,mul:Et,divide:nt,div:Lt,random:Rt,zero:y,transformMat4:S,transformMat3:d,rotate:n,setLength:i,truncate:o,midpoint:f}}const rn=new Map;function yn(u){let p=rn.get(u);return p||(p=Pn(u),rn.set(u,p)),p}function zn(u){function p(e,r,h){const l=new u(3);return e!==void 0&&(l[0]=e,r!==void 0&&(l[1]=r,h!==void 0&&(l[2]=h))),l}const m=p;function v(e,r,h,l){const M=l??new u(3);return M[0]=e,M[1]=r,M[2]=h,M}function P(e,r){const h=r??new u(3);return h[0]=Math.ceil(e[0]),h[1]=Math.ceil(e[1]),h[2]=Math.ceil(e[2]),h}function B(e,r){const h=r??new u(3);return h[0]=Math.floor(e[0]),h[1]=Math.floor(e[1]),h[2]=Math.floor(e[2]),h}function U(e,r){const h=r??new u(3);return h[0]=Math.round(e[0]),h[1]=Math.round(e[1]),h[2]=Math.round(e[2]),h}function R(e,r=0,h=1,l){const M=l??new u(3);return M[0]=Math.min(h,Math.max(r,e[0])),M[1]=Math.min(h,Math.max(r,e[1])),M[2]=Math.min(h,Math.max(r,e[2])),M}function V(e,r,h){const l=h??new u(3);return l[0]=e[0]+r[0],l[1]=e[1]+r[1],l[2]=e[2]+r[2],l}function X(e,r,h,l){const M=l??new u(3);return M[0]=e[0]+r[0]*h,M[1]=e[1]+r[1]*h,M[2]=e[2]+r[2]*h,M}function K(e,r){const h=e[0],l=e[1],M=e[2],D=r[0],A=r[1],T=r[2],z=Math.sqrt(h*h+l*l+M*M),G=Math.sqrt(D*D+A*A+T*T),F=z*G,q=F&&ht(e,r)/F;return Math.acos(q)}function Q(e,r,h){const l=h??new u(3);return l[0]=e[0]-r[0],l[1]=e[1]-r[1],l[2]=e[2]-r[2],l}const $=Q;function H(e,r){return Math.abs(e[0]-r[0])<L&&Math.abs(e[1]-r[1])<L&&Math.abs(e[2]-r[2])<L}function C(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function J(e,r,h,l){const M=l??new u(3);return M[0]=e[0]+h*(r[0]-e[0]),M[1]=e[1]+h*(r[1]-e[1]),M[2]=e[2]+h*(r[2]-e[2]),M}function tt(e,r,h,l){const M=l??new u(3);return M[0]=e[0]+h[0]*(r[0]-e[0]),M[1]=e[1]+h[1]*(r[1]-e[1]),M[2]=e[2]+h[2]*(r[2]-e[2]),M}function k(e,r,h){const l=h??new u(3);return l[0]=Math.max(e[0],r[0]),l[1]=Math.max(e[1],r[1]),l[2]=Math.max(e[2],r[2]),l}function O(e,r,h){const l=h??new u(3);return l[0]=Math.min(e[0],r[0]),l[1]=Math.min(e[1],r[1]),l[2]=Math.min(e[2],r[2]),l}function at(e,r,h){const l=h??new u(3);return l[0]=e[0]*r,l[1]=e[1]*r,l[2]=e[2]*r,l}const mt=at;function ut(e,r,h){const l=h??new u(3);return l[0]=e[0]/r,l[1]=e[1]/r,l[2]=e[2]/r,l}function Gt(e,r){const h=r??new u(3);return h[0]=1/e[0],h[1]=1/e[1],h[2]=1/e[2],h}const dt=Gt;function At(e,r,h){const l=h??new u(3),M=e[2]*r[0]-e[0]*r[2],D=e[0]*r[1]-e[1]*r[0];return l[0]=e[1]*r[2]-e[2]*r[1],l[1]=M,l[2]=D,l}function ht(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function et(e){const r=e[0],h=e[1],l=e[2];return Math.sqrt(r*r+h*h+l*l)}const Tt=et;function st(e){const r=e[0],h=e[1],l=e[2];return r*r+h*h+l*l}const Bt=st;function ft(e,r){const h=e[0]-r[0],l=e[1]-r[1],M=e[2]-r[2];return Math.sqrt(h*h+l*l+M*M)}const N=ft;function W(e,r){const h=e[0]-r[0],l=e[1]-r[1],M=e[2]-r[2];return h*h+l*l+M*M}const b=W;function ot(e,r){const h=r??new u(3),l=e[0],M=e[1],D=e[2],A=Math.sqrt(l*l+M*M+D*D);return A>1e-5?(h[0]=l/A,h[1]=M/A,h[2]=D/A):(h[0]=0,h[1]=0,h[2]=0),h}function Ft(e,r){const h=r??new u(3);return h[0]=-e[0],h[1]=-e[1],h[2]=-e[2],h}function Z(e,r){const h=r??new u(3);return h[0]=e[0],h[1]=e[1],h[2]=e[2],h}const It=Z;function wt(e,r,h){const l=h??new u(3);return l[0]=e[0]*r[0],l[1]=e[1]*r[1],l[2]=e[2]*r[2],l}const Et=wt;function nt(e,r,h){const l=h??new u(3);return l[0]=e[0]/r[0],l[1]=e[1]/r[1],l[2]=e[2]/r[2],l}const Lt=nt;function Rt(e=1,r){const h=r??new u(3),l=Math.random()*2*Math.PI,M=Math.random()*2-1,D=Math.sqrt(1-M*M)*e;return h[0]=Math.cos(l)*D,h[1]=Math.sin(l)*D,h[2]=M*e,h}function y(e){const r=e??new u(3);return r[0]=0,r[1]=0,r[2]=0,r}function S(e,r,h){const l=h??new u(3),M=e[0],D=e[1],A=e[2],T=r[3]*M+r[7]*D+r[11]*A+r[15]||1;return l[0]=(r[0]*M+r[4]*D+r[8]*A+r[12])/T,l[1]=(r[1]*M+r[5]*D+r[9]*A+r[13])/T,l[2]=(r[2]*M+r[6]*D+r[10]*A+r[14])/T,l}function d(e,r,h){const l=h??new u(3),M=e[0],D=e[1],A=e[2];return l[0]=M*r[0]+D*r[4]+A*r[8],l[1]=M*r[1]+D*r[5]+A*r[9],l[2]=M*r[2]+D*r[6]+A*r[10],l}function n(e,r,h){const l=h??new u(3),M=e[0],D=e[1],A=e[2];return l[0]=M*r[0]+D*r[4]+A*r[8],l[1]=M*r[1]+D*r[5]+A*r[9],l[2]=M*r[2]+D*r[6]+A*r[10],l}function i(e,r,h){const l=h??new u(3),M=r[0],D=r[1],A=r[2],T=r[3]*2,z=e[0],G=e[1],F=e[2],q=D*F-A*G,E=A*z-M*F,I=M*G-D*z;return l[0]=z+q*T+(D*I-A*E)*2,l[1]=G+E*T+(A*q-M*I)*2,l[2]=F+I*T+(M*E-D*q)*2,l}function o(e,r){const h=r??new u(3);return h[0]=e[12],h[1]=e[13],h[2]=e[14],h}function f(e,r,h){const l=h??new u(3),M=r*4;return l[0]=e[M+0],l[1]=e[M+1],l[2]=e[M+2],l}function w(e,r){const h=r??new u(3),l=e[0],M=e[1],D=e[2],A=e[4],T=e[5],z=e[6],G=e[8],F=e[9],q=e[10];return h[0]=Math.sqrt(l*l+M*M+D*D),h[1]=Math.sqrt(A*A+T*T+z*z),h[2]=Math.sqrt(G*G+F*F+q*q),h}function g(e,r,h,l){const M=l??new u(3),D=[],A=[];return D[0]=e[0]-r[0],D[1]=e[1]-r[1],D[2]=e[2]-r[2],A[0]=D[0],A[1]=D[1]*Math.cos(h)-D[2]*Math.sin(h),A[2]=D[1]*Math.sin(h)+D[2]*Math.cos(h),M[0]=A[0]+r[0],M[1]=A[1]+r[1],M[2]=A[2]+r[2],M}function x(e,r,h,l){const M=l??new u(3),D=[],A=[];return D[0]=e[0]-r[0],D[1]=e[1]-r[1],D[2]=e[2]-r[2],A[0]=D[2]*Math.sin(h)+D[0]*Math.cos(h),A[1]=D[1],A[2]=D[2]*Math.cos(h)-D[0]*Math.sin(h),M[0]=A[0]+r[0],M[1]=A[1]+r[1],M[2]=A[2]+r[2],M}function t(e,r,h,l){const M=l??new u(3),D=[],A=[];return D[0]=e[0]-r[0],D[1]=e[1]-r[1],D[2]=e[2]-r[2],A[0]=D[0]*Math.cos(h)-D[1]*Math.sin(h),A[1]=D[0]*Math.sin(h)+D[1]*Math.cos(h),A[2]=D[2],M[0]=A[0]+r[0],M[1]=A[1]+r[1],M[2]=A[2]+r[2],M}function a(e,r,h){const l=h??new u(3);return ot(e,l),at(l,r,l)}function s(e,r,h){const l=h??new u(3);return et(e)>r?a(e,r,l):Z(e,l)}function c(e,r,h){const l=h??new u(3);return J(e,r,.5,l)}return{create:p,fromValues:m,set:v,ceil:P,floor:B,round:U,clamp:R,add:V,addScaled:X,angle:K,subtract:Q,sub:$,equalsApproximately:H,equals:C,lerp:J,lerpV:tt,max:k,min:O,mulScalar:at,scale:mt,divScalar:ut,inverse:Gt,invert:dt,cross:At,dot:ht,length:et,len:Tt,lengthSq:st,lenSq:Bt,distance:ft,dist:N,distanceSq:W,distSq:b,normalize:ot,negate:Ft,copy:Z,clone:It,multiply:wt,mul:Et,divide:nt,div:Lt,random:Rt,zero:y,transformMat4:S,transformMat4Upper3x3:d,transformMat3:n,transformQuat:i,getTranslation:o,getAxis:f,getScaling:w,rotateX:g,rotateY:x,rotateZ:t,setLength:a,truncate:s,midpoint:c}}const an=new Map;function _t(u){let p=an.get(u);return p||(p=zn(u),an.set(u,p)),p}function Gn(u){const p=yn(u),m=_t(u);function v(n,i,o,f,w,g,x,t,a){const s=new u(12);return s[3]=0,s[7]=0,s[11]=0,n!==void 0&&(s[0]=n,i!==void 0&&(s[1]=i,o!==void 0&&(s[2]=o,f!==void 0&&(s[4]=f,w!==void 0&&(s[5]=w,g!==void 0&&(s[6]=g,x!==void 0&&(s[8]=x,t!==void 0&&(s[9]=t,a!==void 0&&(s[10]=a))))))))),s}function P(n,i,o,f,w,g,x,t,a,s){const c=s??new u(12);return c[0]=n,c[1]=i,c[2]=o,c[3]=0,c[4]=f,c[5]=w,c[6]=g,c[7]=0,c[8]=x,c[9]=t,c[10]=a,c[11]=0,c}function B(n,i){const o=i??new u(12);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=0,o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=0,o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=0,o}function U(n,i){const o=i??new u(12),f=n[0],w=n[1],g=n[2],x=n[3],t=f+f,a=w+w,s=g+g,c=f*t,e=w*t,r=w*a,h=g*t,l=g*a,M=g*s,D=x*t,A=x*a,T=x*s;return o[0]=1-r-M,o[1]=e+T,o[2]=h-A,o[3]=0,o[4]=e-T,o[5]=1-c-M,o[6]=l+D,o[7]=0,o[8]=h+A,o[9]=l-D,o[10]=1-c-r,o[11]=0,o}function R(n,i){const o=i??new u(12);return o[0]=-n[0],o[1]=-n[1],o[2]=-n[2],o[4]=-n[4],o[5]=-n[5],o[6]=-n[6],o[8]=-n[8],o[9]=-n[9],o[10]=-n[10],o}function V(n,i,o){const f=o??new u(12);return f[0]=n[0]*i,f[1]=n[1]*i,f[2]=n[2]*i,f[4]=n[4]*i,f[5]=n[5]*i,f[6]=n[6]*i,f[8]=n[8]*i,f[9]=n[9]*i,f[10]=n[10]*i,f}const X=V;function K(n,i,o){const f=o??new u(12);return f[0]=n[0]+i[0],f[1]=n[1]+i[1],f[2]=n[2]+i[2],f[4]=n[4]+i[4],f[5]=n[5]+i[5],f[6]=n[6]+i[6],f[8]=n[8]+i[8],f[9]=n[9]+i[9],f[10]=n[10]+i[10],f}function Q(n,i){const o=i??new u(12);return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[8]=n[8],o[9]=n[9],o[10]=n[10],o}const $=Q;function H(n,i){return Math.abs(n[0]-i[0])<L&&Math.abs(n[1]-i[1])<L&&Math.abs(n[2]-i[2])<L&&Math.abs(n[4]-i[4])<L&&Math.abs(n[5]-i[5])<L&&Math.abs(n[6]-i[6])<L&&Math.abs(n[8]-i[8])<L&&Math.abs(n[9]-i[9])<L&&Math.abs(n[10]-i[10])<L}function C(n,i){return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[4]===i[4]&&n[5]===i[5]&&n[6]===i[6]&&n[8]===i[8]&&n[9]===i[9]&&n[10]===i[10]}function J(n){const i=n??new u(12);return i[0]=1,i[1]=0,i[2]=0,i[4]=0,i[5]=1,i[6]=0,i[8]=0,i[9]=0,i[10]=1,i}function tt(n,i){const o=i??new u(12);if(o===n){let r;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,o}const f=n[0],w=n[1],g=n[2],x=n[4],t=n[5],a=n[6],s=n[8],c=n[9],e=n[10];return o[0]=f,o[1]=x,o[2]=s,o[4]=w,o[5]=t,o[6]=c,o[8]=g,o[9]=a,o[10]=e,o}function k(n,i){const o=i??new u(12),f=n[0],w=n[1],g=n[2],x=n[4],t=n[5],a=n[6],s=n[8],c=n[9],e=n[10],r=e*t-a*c,h=-e*x+a*s,l=c*x-t*s,M=1/(f*r+w*h+g*l);return o[0]=r*M,o[1]=(-e*w+g*c)*M,o[2]=(a*w-g*t)*M,o[4]=h*M,o[5]=(e*f-g*s)*M,o[6]=(-a*f+g*x)*M,o[8]=l*M,o[9]=(-c*f+w*s)*M,o[10]=(t*f-w*x)*M,o}function O(n){const i=n[0],o=n[1],f=n[2],w=n[4],g=n[5],x=n[6],t=n[8],a=n[9],s=n[10];return i*(g*s-a*x)-w*(o*s-a*f)+t*(o*x-g*f)}const at=k;function mt(n,i,o){const f=o??new u(12),w=n[0],g=n[1],x=n[2],t=n[4],a=n[5],s=n[6],c=n[8],e=n[9],r=n[10],h=i[0],l=i[1],M=i[2],D=i[4],A=i[5],T=i[6],z=i[8],G=i[9],F=i[10];return f[0]=w*h+t*l+c*M,f[1]=g*h+a*l+e*M,f[2]=x*h+s*l+r*M,f[4]=w*D+t*A+c*T,f[5]=g*D+a*A+e*T,f[6]=x*D+s*A+r*T,f[8]=w*z+t*G+c*F,f[9]=g*z+a*G+e*F,f[10]=x*z+s*G+r*F,f}const ut=mt;function Gt(n,i,o){const f=o??J();return n!==f&&(f[0]=n[0],f[1]=n[1],f[2]=n[2],f[4]=n[4],f[5]=n[5],f[6]=n[6]),f[8]=i[0],f[9]=i[1],f[10]=1,f}function dt(n,i){const o=i??p.create();return o[0]=n[8],o[1]=n[9],o}function At(n,i,o){const f=o??p.create(),w=i*4;return f[0]=n[w+0],f[1]=n[w+1],f}function ht(n,i,o,f){const w=f===n?n:Q(n,f),g=o*4;return w[g+0]=i[0],w[g+1]=i[1],w}function et(n,i){const o=i??p.create(),f=n[0],w=n[1],g=n[4],x=n[5];return o[0]=Math.sqrt(f*f+w*w),o[1]=Math.sqrt(g*g+x*x),o}function Tt(n,i){const o=i??m.create(),f=n[0],w=n[1],g=n[2],x=n[4],t=n[5],a=n[6],s=n[8],c=n[9],e=n[10];return o[0]=Math.sqrt(f*f+w*w+g*g),o[1]=Math.sqrt(x*x+t*t+a*a),o[2]=Math.sqrt(s*s+c*c+e*e),o}function st(n,i){const o=i??new u(12);return o[0]=1,o[1]=0,o[2]=0,o[4]=0,o[5]=1,o[6]=0,o[8]=n[0],o[9]=n[1],o[10]=1,o}function Bt(n,i,o){const f=o??new u(12),w=i[0],g=i[1],x=n[0],t=n[1],a=n[2],s=n[4],c=n[5],e=n[6],r=n[8],h=n[9],l=n[10];return n!==f&&(f[0]=x,f[1]=t,f[2]=a,f[4]=s,f[5]=c,f[6]=e),f[8]=x*w+s*g+r,f[9]=t*w+c*g+h,f[10]=a*w+e*g+l,f}function ft(n,i){const o=i??new u(12),f=Math.cos(n),w=Math.sin(n);return o[0]=f,o[1]=w,o[2]=0,o[4]=-w,o[5]=f,o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function N(n,i,o){const f=o??new u(12),w=n[0],g=n[1],x=n[2],t=n[4],a=n[5],s=n[6],c=Math.cos(i),e=Math.sin(i);return f[0]=c*w+e*t,f[1]=c*g+e*a,f[2]=c*x+e*s,f[4]=c*t-e*w,f[5]=c*a-e*g,f[6]=c*s-e*x,n!==f&&(f[8]=n[8],f[9]=n[9],f[10]=n[10]),f}function W(n,i){const o=i??new u(12),f=Math.cos(n),w=Math.sin(n);return o[0]=1,o[1]=0,o[2]=0,o[4]=0,o[5]=f,o[6]=w,o[8]=0,o[9]=-w,o[10]=f,o}function b(n,i,o){const f=o??new u(12),w=n[4],g=n[5],x=n[6],t=n[8],a=n[9],s=n[10],c=Math.cos(i),e=Math.sin(i);return f[4]=c*w+e*t,f[5]=c*g+e*a,f[6]=c*x+e*s,f[8]=c*t-e*w,f[9]=c*a-e*g,f[10]=c*s-e*x,n!==f&&(f[0]=n[0],f[1]=n[1],f[2]=n[2]),f}function ot(n,i){const o=i??new u(12),f=Math.cos(n),w=Math.sin(n);return o[0]=f,o[1]=0,o[2]=-w,o[4]=0,o[5]=1,o[6]=0,o[8]=w,o[9]=0,o[10]=f,o}function Ft(n,i,o){const f=o??new u(12),w=n[0],g=n[1],x=n[2],t=n[8],a=n[9],s=n[10],c=Math.cos(i),e=Math.sin(i);return f[0]=c*w-e*t,f[1]=c*g-e*a,f[2]=c*x-e*s,f[8]=c*t+e*w,f[9]=c*a+e*g,f[10]=c*s+e*x,n!==f&&(f[4]=n[4],f[5]=n[5],f[6]=n[6]),f}const Z=ft,It=N;function wt(n,i){const o=i??new u(12);return o[0]=n[0],o[1]=0,o[2]=0,o[4]=0,o[5]=n[1],o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function Et(n,i,o){const f=o??new u(12),w=i[0],g=i[1];return f[0]=w*n[0],f[1]=w*n[1],f[2]=w*n[2],f[4]=g*n[4],f[5]=g*n[5],f[6]=g*n[6],n!==f&&(f[8]=n[8],f[9]=n[9],f[10]=n[10]),f}function nt(n,i){const o=i??new u(12);return o[0]=n[0],o[1]=0,o[2]=0,o[4]=0,o[5]=n[1],o[6]=0,o[8]=0,o[9]=0,o[10]=n[2],o}function Lt(n,i,o){const f=o??new u(12),w=i[0],g=i[1],x=i[2];return f[0]=w*n[0],f[1]=w*n[1],f[2]=w*n[2],f[4]=g*n[4],f[5]=g*n[5],f[6]=g*n[6],f[8]=x*n[8],f[9]=x*n[9],f[10]=x*n[10],f}function Rt(n,i){const o=i??new u(12);return o[0]=n,o[1]=0,o[2]=0,o[4]=0,o[5]=n,o[6]=0,o[8]=0,o[9]=0,o[10]=1,o}function y(n,i,o){const f=o??new u(12);return f[0]=i*n[0],f[1]=i*n[1],f[2]=i*n[2],f[4]=i*n[4],f[5]=i*n[5],f[6]=i*n[6],n!==f&&(f[8]=n[8],f[9]=n[9],f[10]=n[10]),f}function S(n,i){const o=i??new u(12);return o[0]=n,o[1]=0,o[2]=0,o[4]=0,o[5]=n,o[6]=0,o[8]=0,o[9]=0,o[10]=n,o}function d(n,i,o){const f=o??new u(12);return f[0]=i*n[0],f[1]=i*n[1],f[2]=i*n[2],f[4]=i*n[4],f[5]=i*n[5],f[6]=i*n[6],f[8]=i*n[8],f[9]=i*n[9],f[10]=i*n[10],f}return{add:K,clone:$,copy:Q,create:v,determinant:O,equals:C,equalsApproximately:H,fromMat4:B,fromQuat:U,get3DScaling:Tt,getAxis:At,getScaling:et,getTranslation:dt,identity:J,inverse:k,invert:at,mul:ut,mulScalar:X,multiply:mt,multiplyScalar:V,negate:R,rotate:N,rotateX:b,rotateY:Ft,rotateZ:It,rotation:ft,rotationX:W,rotationY:ot,rotationZ:Z,scale:Et,scale3D:Lt,scaling:wt,scaling3D:nt,set:P,setAxis:ht,setTranslation:Gt,translate:Bt,translation:st,transpose:tt,uniformScale:y,uniformScale3D:d,uniformScaling:Rt,uniformScaling3D:S}}const un=new Map;function Tn(u){let p=un.get(u);return p||(p=Gn(u),un.set(u,p)),p}function Bn(u){const p=_t(u);function m(t,a,s,c,e,r,h,l,M,D,A,T,z,G,F,q){const E=new u(16);return t!==void 0&&(E[0]=t,a!==void 0&&(E[1]=a,s!==void 0&&(E[2]=s,c!==void 0&&(E[3]=c,e!==void 0&&(E[4]=e,r!==void 0&&(E[5]=r,h!==void 0&&(E[6]=h,l!==void 0&&(E[7]=l,M!==void 0&&(E[8]=M,D!==void 0&&(E[9]=D,A!==void 0&&(E[10]=A,T!==void 0&&(E[11]=T,z!==void 0&&(E[12]=z,G!==void 0&&(E[13]=G,F!==void 0&&(E[14]=F,q!==void 0&&(E[15]=q)))))))))))))))),E}function v(t,a,s,c,e,r,h,l,M,D,A,T,z,G,F,q,E){const I=E??new u(16);return I[0]=t,I[1]=a,I[2]=s,I[3]=c,I[4]=e,I[5]=r,I[6]=h,I[7]=l,I[8]=M,I[9]=D,I[10]=A,I[11]=T,I[12]=z,I[13]=G,I[14]=F,I[15]=q,I}function P(t,a){const s=a??new u(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=0,s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=0,s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function B(t,a){const s=a??new u(16),c=t[0],e=t[1],r=t[2],h=t[3],l=c+c,M=e+e,D=r+r,A=c*l,T=e*l,z=e*M,G=r*l,F=r*M,q=r*D,E=h*l,I=h*M,j=h*D;return s[0]=1-z-q,s[1]=T+j,s[2]=G-I,s[3]=0,s[4]=T-j,s[5]=1-A-q,s[6]=F+E,s[7]=0,s[8]=G+I,s[9]=F-E,s[10]=1-A-z,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function U(t,a){const s=a??new u(16);return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s[4]=-t[4],s[5]=-t[5],s[6]=-t[6],s[7]=-t[7],s[8]=-t[8],s[9]=-t[9],s[10]=-t[10],s[11]=-t[11],s[12]=-t[12],s[13]=-t[13],s[14]=-t[14],s[15]=-t[15],s}function R(t,a,s){const c=s??new u(16);return c[0]=t[0]+a[0],c[1]=t[1]+a[1],c[2]=t[2]+a[2],c[3]=t[3]+a[3],c[4]=t[4]+a[4],c[5]=t[5]+a[5],c[6]=t[6]+a[6],c[7]=t[7]+a[7],c[8]=t[8]+a[8],c[9]=t[9]+a[9],c[10]=t[10]+a[10],c[11]=t[11]+a[11],c[12]=t[12]+a[12],c[13]=t[13]+a[13],c[14]=t[14]+a[14],c[15]=t[15]+a[15],c}function V(t,a,s){const c=s??new u(16);return c[0]=t[0]*a,c[1]=t[1]*a,c[2]=t[2]*a,c[3]=t[3]*a,c[4]=t[4]*a,c[5]=t[5]*a,c[6]=t[6]*a,c[7]=t[7]*a,c[8]=t[8]*a,c[9]=t[9]*a,c[10]=t[10]*a,c[11]=t[11]*a,c[12]=t[12]*a,c[13]=t[13]*a,c[14]=t[14]*a,c[15]=t[15]*a,c}const X=V;function K(t,a){const s=a??new u(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}const Q=K;function $(t,a){return Math.abs(t[0]-a[0])<L&&Math.abs(t[1]-a[1])<L&&Math.abs(t[2]-a[2])<L&&Math.abs(t[3]-a[3])<L&&Math.abs(t[4]-a[4])<L&&Math.abs(t[5]-a[5])<L&&Math.abs(t[6]-a[6])<L&&Math.abs(t[7]-a[7])<L&&Math.abs(t[8]-a[8])<L&&Math.abs(t[9]-a[9])<L&&Math.abs(t[10]-a[10])<L&&Math.abs(t[11]-a[11])<L&&Math.abs(t[12]-a[12])<L&&Math.abs(t[13]-a[13])<L&&Math.abs(t[14]-a[14])<L&&Math.abs(t[15]-a[15])<L}function H(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(t){const a=t??new u(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function J(t,a){const s=a??new u(16);if(s===t){let Y;return Y=t[1],t[1]=t[4],t[4]=Y,Y=t[2],t[2]=t[8],t[8]=Y,Y=t[3],t[3]=t[12],t[12]=Y,Y=t[6],t[6]=t[9],t[9]=Y,Y=t[7],t[7]=t[13],t[13]=Y,Y=t[11],t[11]=t[14],t[14]=Y,s}const c=t[0],e=t[1],r=t[2],h=t[3],l=t[4],M=t[5],D=t[6],A=t[7],T=t[8],z=t[9],G=t[10],F=t[11],q=t[12],E=t[13],I=t[14],j=t[15];return s[0]=c,s[1]=l,s[2]=T,s[3]=q,s[4]=e,s[5]=M,s[6]=z,s[7]=E,s[8]=r,s[9]=D,s[10]=G,s[11]=I,s[12]=h,s[13]=A,s[14]=F,s[15]=j,s}function tt(t,a){const s=a??new u(16),c=t[0],e=t[1],r=t[2],h=t[3],l=t[4],M=t[5],D=t[6],A=t[7],T=t[8],z=t[9],G=t[10],F=t[11],q=t[12],E=t[13],I=t[14],j=t[15],Y=G*j,ct=I*F,rt=D*j,it=I*A,lt=D*F,pt=G*A,gt=r*j,xt=I*h,yt=r*F,Mt=G*h,St=r*A,vt=D*h,Pt=T*E,zt=q*z,Ut=l*E,qt=q*M,Vt=l*z,Ot=T*M,Xt=c*E,Ht=q*e,Yt=c*z,$t=T*e,Qt=c*M,jt=l*e,en=Y*M+it*z+lt*E-(ct*M+rt*z+pt*E),sn=ct*e+gt*z+Mt*E-(Y*e+xt*z+yt*E),on=rt*e+xt*M+St*E-(it*e+gt*M+vt*E),cn=pt*e+yt*M+vt*z-(lt*e+Mt*M+St*z),Dt=1/(c*en+l*sn+T*on+q*cn);return s[0]=Dt*en,s[1]=Dt*sn,s[2]=Dt*on,s[3]=Dt*cn,s[4]=Dt*(ct*l+rt*T+pt*q-(Y*l+it*T+lt*q)),s[5]=Dt*(Y*c+xt*T+yt*q-(ct*c+gt*T+Mt*q)),s[6]=Dt*(it*c+gt*l+vt*q-(rt*c+xt*l+St*q)),s[7]=Dt*(lt*c+Mt*l+St*T-(pt*c+yt*l+vt*T)),s[8]=Dt*(Pt*A+qt*F+Vt*j-(zt*A+Ut*F+Ot*j)),s[9]=Dt*(zt*h+Xt*F+$t*j-(Pt*h+Ht*F+Yt*j)),s[10]=Dt*(Ut*h+Ht*A+Qt*j-(qt*h+Xt*A+jt*j)),s[11]=Dt*(Ot*h+Yt*A+jt*F-(Vt*h+$t*A+Qt*F)),s[12]=Dt*(Ut*G+Ot*I+zt*D-(Vt*I+Pt*D+qt*G)),s[13]=Dt*(Yt*I+Pt*r+Ht*G-(Xt*G+$t*I+zt*r)),s[14]=Dt*(Xt*D+jt*I+qt*r-(Qt*I+Ut*r+Ht*D)),s[15]=Dt*(Qt*G+Vt*r+$t*D-(Yt*D+jt*G+Ot*r)),s}function k(t){const a=t[0],s=t[1],c=t[2],e=t[3],r=t[4],h=t[5],l=t[6],M=t[7],D=t[8],A=t[9],T=t[10],z=t[11],G=t[12],F=t[13],q=t[14],E=t[15],I=T*E,j=q*z,Y=l*E,ct=q*M,rt=l*z,it=T*M,lt=c*E,pt=q*e,gt=c*z,xt=T*e,yt=c*M,Mt=l*e,St=I*h+ct*A+rt*F-(j*h+Y*A+it*F),vt=j*s+lt*A+xt*F-(I*s+pt*A+gt*F),Pt=Y*s+pt*h+yt*F-(ct*s+lt*h+Mt*F),zt=it*s+gt*h+Mt*A-(rt*s+xt*h+yt*A);return a*St+r*vt+D*Pt+G*zt}const O=tt;function at(t,a,s){const c=s??new u(16),e=t[0],r=t[1],h=t[2],l=t[3],M=t[4],D=t[5],A=t[6],T=t[7],z=t[8],G=t[9],F=t[10],q=t[11],E=t[12],I=t[13],j=t[14],Y=t[15],ct=a[0],rt=a[1],it=a[2],lt=a[3],pt=a[4],gt=a[5],xt=a[6],yt=a[7],Mt=a[8],St=a[9],vt=a[10],Pt=a[11],zt=a[12],Ut=a[13],qt=a[14],Vt=a[15];return c[0]=e*ct+M*rt+z*it+E*lt,c[1]=r*ct+D*rt+G*it+I*lt,c[2]=h*ct+A*rt+F*it+j*lt,c[3]=l*ct+T*rt+q*it+Y*lt,c[4]=e*pt+M*gt+z*xt+E*yt,c[5]=r*pt+D*gt+G*xt+I*yt,c[6]=h*pt+A*gt+F*xt+j*yt,c[7]=l*pt+T*gt+q*xt+Y*yt,c[8]=e*Mt+M*St+z*vt+E*Pt,c[9]=r*Mt+D*St+G*vt+I*Pt,c[10]=h*Mt+A*St+F*vt+j*Pt,c[11]=l*Mt+T*St+q*vt+Y*Pt,c[12]=e*zt+M*Ut+z*qt+E*Vt,c[13]=r*zt+D*Ut+G*qt+I*Vt,c[14]=h*zt+A*Ut+F*qt+j*Vt,c[15]=l*zt+T*Ut+q*qt+Y*Vt,c}const mt=at;function ut(t,a,s){const c=s??C();return t!==c&&(c[0]=t[0],c[1]=t[1],c[2]=t[2],c[3]=t[3],c[4]=t[4],c[5]=t[5],c[6]=t[6],c[7]=t[7],c[8]=t[8],c[9]=t[9],c[10]=t[10],c[11]=t[11]),c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=1,c}function Gt(t,a){const s=a??p.create();return s[0]=t[12],s[1]=t[13],s[2]=t[14],s}function dt(t,a,s){const c=s??p.create(),e=a*4;return c[0]=t[e+0],c[1]=t[e+1],c[2]=t[e+2],c}function At(t,a,s,c){const e=c===t?c:K(t,c),r=s*4;return e[r+0]=a[0],e[r+1]=a[1],e[r+2]=a[2],e}function ht(t,a){const s=a??p.create(),c=t[0],e=t[1],r=t[2],h=t[4],l=t[5],M=t[6],D=t[8],A=t[9],T=t[10];return s[0]=Math.sqrt(c*c+e*e+r*r),s[1]=Math.sqrt(h*h+l*l+M*M),s[2]=Math.sqrt(D*D+A*A+T*T),s}function et(t,a,s,c,e){const r=e??new u(16),h=Math.tan(Math.PI*.5-.5*t);if(r[0]=h/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,Number.isFinite(c)){const l=1/(s-c);r[10]=c*l,r[14]=c*s*l}else r[10]=-1,r[14]=-s;return r}function Tt(t,a,s,c=1/0,e){const r=e??new u(16),h=1/Math.tan(t*.5);if(r[0]=h/a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,c===1/0)r[10]=0,r[14]=s;else{const l=1/(c-s);r[10]=s*l,r[14]=c*s*l}return r}function st(t,a,s,c,e,r,h){const l=h??new u(16);return l[0]=2/(a-t),l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2/(c-s),l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1/(e-r),l[11]=0,l[12]=(a+t)/(t-a),l[13]=(c+s)/(s-c),l[14]=e/(e-r),l[15]=1,l}function Bt(t,a,s,c,e,r,h){const l=h??new u(16),M=a-t,D=c-s,A=e-r;return l[0]=2*e/M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2*e/D,l[6]=0,l[7]=0,l[8]=(t+a)/M,l[9]=(c+s)/D,l[10]=r/A,l[11]=-1,l[12]=0,l[13]=0,l[14]=e*r/A,l[15]=0,l}function ft(t,a,s,c,e,r=1/0,h){const l=h??new u(16),M=a-t,D=c-s;if(l[0]=2*e/M,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=2*e/D,l[6]=0,l[7]=0,l[8]=(t+a)/M,l[9]=(c+s)/D,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,r===1/0)l[10]=0,l[14]=e;else{const A=1/(r-e);l[10]=e*A,l[14]=r*e*A}return l}const N=p.create(),W=p.create(),b=p.create();function ot(t,a,s,c){const e=c??new u(16);return p.normalize(p.subtract(a,t,b),b),p.normalize(p.cross(s,b,N),N),p.normalize(p.cross(b,N,W),W),e[0]=N[0],e[1]=N[1],e[2]=N[2],e[3]=0,e[4]=W[0],e[5]=W[1],e[6]=W[2],e[7]=0,e[8]=b[0],e[9]=b[1],e[10]=b[2],e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Ft(t,a,s,c){const e=c??new u(16);return p.normalize(p.subtract(t,a,b),b),p.normalize(p.cross(s,b,N),N),p.normalize(p.cross(b,N,W),W),e[0]=N[0],e[1]=N[1],e[2]=N[2],e[3]=0,e[4]=W[0],e[5]=W[1],e[6]=W[2],e[7]=0,e[8]=b[0],e[9]=b[1],e[10]=b[2],e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Z(t,a,s,c){const e=c??new u(16);return p.normalize(p.subtract(t,a,b),b),p.normalize(p.cross(s,b,N),N),p.normalize(p.cross(b,N,W),W),e[0]=N[0],e[1]=W[0],e[2]=b[0],e[3]=0,e[4]=N[1],e[5]=W[1],e[6]=b[1],e[7]=0,e[8]=N[2],e[9]=W[2],e[10]=b[2],e[11]=0,e[12]=-(N[0]*t[0]+N[1]*t[1]+N[2]*t[2]),e[13]=-(W[0]*t[0]+W[1]*t[1]+W[2]*t[2]),e[14]=-(b[0]*t[0]+b[1]*t[1]+b[2]*t[2]),e[15]=1,e}function It(t,a){const s=a??new u(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=1,s}function wt(t,a,s){const c=s??new u(16),e=a[0],r=a[1],h=a[2],l=t[0],M=t[1],D=t[2],A=t[3],T=t[4],z=t[5],G=t[6],F=t[7],q=t[8],E=t[9],I=t[10],j=t[11],Y=t[12],ct=t[13],rt=t[14],it=t[15];return t!==c&&(c[0]=l,c[1]=M,c[2]=D,c[3]=A,c[4]=T,c[5]=z,c[6]=G,c[7]=F,c[8]=q,c[9]=E,c[10]=I,c[11]=j),c[12]=l*e+T*r+q*h+Y,c[13]=M*e+z*r+E*h+ct,c[14]=D*e+G*r+I*h+rt,c[15]=A*e+F*r+j*h+it,c}function Et(t,a){const s=a??new u(16),c=Math.cos(t),e=Math.sin(t);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=c,s[6]=e,s[7]=0,s[8]=0,s[9]=-e,s[10]=c,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function nt(t,a,s){const c=s??new u(16),e=t[4],r=t[5],h=t[6],l=t[7],M=t[8],D=t[9],A=t[10],T=t[11],z=Math.cos(a),G=Math.sin(a);return c[4]=z*e+G*M,c[5]=z*r+G*D,c[6]=z*h+G*A,c[7]=z*l+G*T,c[8]=z*M-G*e,c[9]=z*D-G*r,c[10]=z*A-G*h,c[11]=z*T-G*l,t!==c&&(c[0]=t[0],c[1]=t[1],c[2]=t[2],c[3]=t[3],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]),c}function Lt(t,a){const s=a??new u(16),c=Math.cos(t),e=Math.sin(t);return s[0]=c,s[1]=0,s[2]=-e,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=e,s[9]=0,s[10]=c,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Rt(t,a,s){const c=s??new u(16),e=t[0],r=t[1],h=t[2],l=t[3],M=t[8],D=t[9],A=t[10],T=t[11],z=Math.cos(a),G=Math.sin(a);return c[0]=z*e-G*M,c[1]=z*r-G*D,c[2]=z*h-G*A,c[3]=z*l-G*T,c[8]=z*M+G*e,c[9]=z*D+G*r,c[10]=z*A+G*h,c[11]=z*T+G*l,t!==c&&(c[4]=t[4],c[5]=t[5],c[6]=t[6],c[7]=t[7],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]),c}function y(t,a){const s=a??new u(16),c=Math.cos(t),e=Math.sin(t);return s[0]=c,s[1]=e,s[2]=0,s[3]=0,s[4]=-e,s[5]=c,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function S(t,a,s){const c=s??new u(16),e=t[0],r=t[1],h=t[2],l=t[3],M=t[4],D=t[5],A=t[6],T=t[7],z=Math.cos(a),G=Math.sin(a);return c[0]=z*e+G*M,c[1]=z*r+G*D,c[2]=z*h+G*A,c[3]=z*l+G*T,c[4]=z*M-G*e,c[5]=z*D-G*r,c[6]=z*A-G*h,c[7]=z*T-G*l,t!==c&&(c[8]=t[8],c[9]=t[9],c[10]=t[10],c[11]=t[11],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]),c}function d(t,a,s){const c=s??new u(16);let e=t[0],r=t[1],h=t[2];const l=Math.sqrt(e*e+r*r+h*h);e/=l,r/=l,h/=l;const M=e*e,D=r*r,A=h*h,T=Math.cos(a),z=Math.sin(a),G=1-T;return c[0]=M+(1-M)*T,c[1]=e*r*G+h*z,c[2]=e*h*G-r*z,c[3]=0,c[4]=e*r*G-h*z,c[5]=D+(1-D)*T,c[6]=r*h*G+e*z,c[7]=0,c[8]=e*h*G+r*z,c[9]=r*h*G-e*z,c[10]=A+(1-A)*T,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}const n=d;function i(t,a,s,c){const e=c??new u(16);let r=a[0],h=a[1],l=a[2];const M=Math.sqrt(r*r+h*h+l*l);r/=M,h/=M,l/=M;const D=r*r,A=h*h,T=l*l,z=Math.cos(s),G=Math.sin(s),F=1-z,q=D+(1-D)*z,E=r*h*F+l*G,I=r*l*F-h*G,j=r*h*F-l*G,Y=A+(1-A)*z,ct=h*l*F+r*G,rt=r*l*F+h*G,it=h*l*F-r*G,lt=T+(1-T)*z,pt=t[0],gt=t[1],xt=t[2],yt=t[3],Mt=t[4],St=t[5],vt=t[6],Pt=t[7],zt=t[8],Ut=t[9],qt=t[10],Vt=t[11];return e[0]=q*pt+E*Mt+I*zt,e[1]=q*gt+E*St+I*Ut,e[2]=q*xt+E*vt+I*qt,e[3]=q*yt+E*Pt+I*Vt,e[4]=j*pt+Y*Mt+ct*zt,e[5]=j*gt+Y*St+ct*Ut,e[6]=j*xt+Y*vt+ct*qt,e[7]=j*yt+Y*Pt+ct*Vt,e[8]=rt*pt+it*Mt+lt*zt,e[9]=rt*gt+it*St+lt*Ut,e[10]=rt*xt+it*vt+lt*qt,e[11]=rt*yt+it*Pt+lt*Vt,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e}const o=i;function f(t,a){const s=a??new u(16);return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function w(t,a,s){const c=s??new u(16),e=a[0],r=a[1],h=a[2];return c[0]=e*t[0],c[1]=e*t[1],c[2]=e*t[2],c[3]=e*t[3],c[4]=r*t[4],c[5]=r*t[5],c[6]=r*t[6],c[7]=r*t[7],c[8]=h*t[8],c[9]=h*t[9],c[10]=h*t[10],c[11]=h*t[11],t!==c&&(c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]),c}function g(t,a){const s=a??new u(16);return s[0]=t,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function x(t,a,s){const c=s??new u(16);return c[0]=a*t[0],c[1]=a*t[1],c[2]=a*t[2],c[3]=a*t[3],c[4]=a*t[4],c[5]=a*t[5],c[6]=a*t[6],c[7]=a*t[7],c[8]=a*t[8],c[9]=a*t[9],c[10]=a*t[10],c[11]=a*t[11],t!==c&&(c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]),c}return{add:R,aim:ot,axisRotate:i,axisRotation:d,cameraAim:Ft,clone:Q,copy:K,create:m,determinant:k,equals:H,equalsApproximately:$,fromMat3:P,fromQuat:B,frustum:Bt,frustumReverseZ:ft,getAxis:dt,getScaling:ht,getTranslation:Gt,identity:C,inverse:tt,invert:O,lookAt:Z,mul:mt,mulScalar:X,multiply:at,multiplyScalar:V,negate:U,ortho:st,perspective:et,perspectiveReverseZ:Tt,rotate:o,rotateX:nt,rotateY:Rt,rotateZ:S,rotation:n,rotationX:Et,rotationY:Lt,rotationZ:y,scale:w,scaling:f,set:v,setAxis:At,setTranslation:ut,translate:wt,translation:It,transpose:J,uniformScale:x,uniformScaling:g}}const fn=new Map;function Fn(u){let p=fn.get(u);return p||(p=Bn(u),fn.set(u,p)),p}function En(u){const p=_t(u);function m(y,S,d,n){const i=new u(4);return y!==void 0&&(i[0]=y,S!==void 0&&(i[1]=S,d!==void 0&&(i[2]=d,n!==void 0&&(i[3]=n)))),i}const v=m;function P(y,S,d,n,i){const o=i??new u(4);return o[0]=y,o[1]=S,o[2]=d,o[3]=n,o}function B(y,S,d){const n=d??new u(4),i=S*.5,o=Math.sin(i);return n[0]=o*y[0],n[1]=o*y[1],n[2]=o*y[2],n[3]=Math.cos(i),n}function U(y,S){const d=S??p.create(3),n=Math.acos(y[3])*2,i=Math.sin(n*.5);return i>L?(d[0]=y[0]/i,d[1]=y[1]/i,d[2]=y[2]/i):(d[0]=1,d[1]=0,d[2]=0),{angle:n,axis:d}}function R(y,S){const d=et(y,S);return Math.acos(2*d*d-1)}function V(y,S,d){const n=d??new u(4),i=y[0],o=y[1],f=y[2],w=y[3],g=S[0],x=S[1],t=S[2],a=S[3];return n[0]=i*a+w*g+o*t-f*x,n[1]=o*a+w*x+f*g-i*t,n[2]=f*a+w*t+i*x-o*g,n[3]=w*a-i*g-o*x-f*t,n}const X=V;function K(y,S,d){const n=d??new u(4),i=S*.5,o=y[0],f=y[1],w=y[2],g=y[3],x=Math.sin(i),t=Math.cos(i);return n[0]=o*t+g*x,n[1]=f*t+w*x,n[2]=w*t-f*x,n[3]=g*t-o*x,n}function Q(y,S,d){const n=d??new u(4),i=S*.5,o=y[0],f=y[1],w=y[2],g=y[3],x=Math.sin(i),t=Math.cos(i);return n[0]=o*t-w*x,n[1]=f*t+g*x,n[2]=w*t+o*x,n[3]=g*t-f*x,n}function $(y,S,d){const n=d??new u(4),i=S*.5,o=y[0],f=y[1],w=y[2],g=y[3],x=Math.sin(i),t=Math.cos(i);return n[0]=o*t+f*x,n[1]=f*t-o*x,n[2]=w*t+g*x,n[3]=g*t-w*x,n}function H(y,S,d,n){const i=n??new u(4),o=y[0],f=y[1],w=y[2],g=y[3];let x=S[0],t=S[1],a=S[2],s=S[3],c=o*x+f*t+w*a+g*s;c<0&&(c=-c,x=-x,t=-t,a=-a,s=-s);let e,r;if(1-c>L){const h=Math.acos(c),l=Math.sin(h);e=Math.sin((1-d)*h)/l,r=Math.sin(d*h)/l}else e=1-d,r=d;return i[0]=e*o+r*x,i[1]=e*f+r*t,i[2]=e*w+r*a,i[3]=e*g+r*s,i}function C(y,S){const d=S??new u(4),n=y[0],i=y[1],o=y[2],f=y[3],w=n*n+i*i+o*o+f*f,g=w?1/w:0;return d[0]=-n*g,d[1]=-i*g,d[2]=-o*g,d[3]=f*g,d}function J(y,S){const d=S??new u(4);return d[0]=-y[0],d[1]=-y[1],d[2]=-y[2],d[3]=y[3],d}function tt(y,S){const d=S??new u(4),n=y[0]+y[5]+y[10];if(n>0){const i=Math.sqrt(n+1);d[3]=.5*i;const o=.5/i;d[0]=(y[6]-y[9])*o,d[1]=(y[8]-y[2])*o,d[2]=(y[1]-y[4])*o}else{let i=0;y[5]>y[0]&&(i=1),y[10]>y[i*4+i]&&(i=2);const o=(i+1)%3,f=(i+2)%3,w=Math.sqrt(y[i*4+i]-y[o*4+o]-y[f*4+f]+1);d[i]=.5*w;const g=.5/w;d[3]=(y[o*4+f]-y[f*4+o])*g,d[o]=(y[o*4+i]+y[i*4+o])*g,d[f]=(y[f*4+i]+y[i*4+f])*g}return d}function k(y,S,d,n,i){const o=i??new u(4),f=y*.5,w=S*.5,g=d*.5,x=Math.sin(f),t=Math.cos(f),a=Math.sin(w),s=Math.cos(w),c=Math.sin(g),e=Math.cos(g);switch(n){case"xyz":o[0]=x*s*e+t*a*c,o[1]=t*a*e-x*s*c,o[2]=t*s*c+x*a*e,o[3]=t*s*e-x*a*c;break;case"xzy":o[0]=x*s*e-t*a*c,o[1]=t*a*e-x*s*c,o[2]=t*s*c+x*a*e,o[3]=t*s*e+x*a*c;break;case"yxz":o[0]=x*s*e+t*a*c,o[1]=t*a*e-x*s*c,o[2]=t*s*c-x*a*e,o[3]=t*s*e+x*a*c;break;case"yzx":o[0]=x*s*e+t*a*c,o[1]=t*a*e+x*s*c,o[2]=t*s*c-x*a*e,o[3]=t*s*e-x*a*c;break;case"zxy":o[0]=x*s*e-t*a*c,o[1]=t*a*e+x*s*c,o[2]=t*s*c+x*a*e,o[3]=t*s*e-x*a*c;break;case"zyx":o[0]=x*s*e-t*a*c,o[1]=t*a*e+x*s*c,o[2]=t*s*c-x*a*e,o[3]=t*s*e+x*a*c;break;default:throw new Error(`Unknown rotation order: ${n}`)}return o}function O(y,S){const d=S??new u(4);return d[0]=y[0],d[1]=y[1],d[2]=y[2],d[3]=y[3],d}const at=O;function mt(y,S,d){const n=d??new u(4);return n[0]=y[0]+S[0],n[1]=y[1]+S[1],n[2]=y[2]+S[2],n[3]=y[3]+S[3],n}function ut(y,S,d){const n=d??new u(4);return n[0]=y[0]-S[0],n[1]=y[1]-S[1],n[2]=y[2]-S[2],n[3]=y[3]-S[3],n}const Gt=ut;function dt(y,S,d){const n=d??new u(4);return n[0]=y[0]*S,n[1]=y[1]*S,n[2]=y[2]*S,n[3]=y[3]*S,n}const At=dt;function ht(y,S,d){const n=d??new u(4);return n[0]=y[0]/S,n[1]=y[1]/S,n[2]=y[2]/S,n[3]=y[3]/S,n}function et(y,S){return y[0]*S[0]+y[1]*S[1]+y[2]*S[2]+y[3]*S[3]}function Tt(y,S,d,n){const i=n??new u(4);return i[0]=y[0]+d*(S[0]-y[0]),i[1]=y[1]+d*(S[1]-y[1]),i[2]=y[2]+d*(S[2]-y[2]),i[3]=y[3]+d*(S[3]-y[3]),i}function st(y){const S=y[0],d=y[1],n=y[2],i=y[3];return Math.sqrt(S*S+d*d+n*n+i*i)}const Bt=st;function ft(y){const S=y[0],d=y[1],n=y[2],i=y[3];return S*S+d*d+n*n+i*i}const N=ft;function W(y,S){const d=S??new u(4),n=y[0],i=y[1],o=y[2],f=y[3],w=Math.sqrt(n*n+i*i+o*o+f*f);return w>1e-5?(d[0]=n/w,d[1]=i/w,d[2]=o/w,d[3]=f/w):(d[0]=0,d[1]=0,d[2]=0,d[3]=1),d}function b(y,S){return Math.abs(y[0]-S[0])<L&&Math.abs(y[1]-S[1])<L&&Math.abs(y[2]-S[2])<L&&Math.abs(y[3]-S[3])<L}function ot(y,S){return y[0]===S[0]&&y[1]===S[1]&&y[2]===S[2]&&y[3]===S[3]}function Ft(y){const S=y??new u(4);return S[0]=0,S[1]=0,S[2]=0,S[3]=1,S}const Z=p.create(),It=p.create(),wt=p.create();function Et(y,S,d){const n=d??new u(4),i=p.dot(y,S);return i<-.999999?(p.cross(It,y,Z),p.len(Z)<1e-6&&p.cross(wt,y,Z),p.normalize(Z,Z),B(Z,Math.PI,n),n):i>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(p.cross(y,S,Z),n[0]=Z[0],n[1]=Z[1],n[2]=Z[2],n[3]=1+i,W(n,n))}const nt=new u(4),Lt=new u(4);function Rt(y,S,d,n,i,o){const f=o??new u(4);return H(y,n,i,nt),H(S,d,i,Lt),H(nt,Lt,2*i*(1-i),f),f}return{create:m,fromValues:v,set:P,fromAxisAngle:B,toAxisAngle:U,angle:R,multiply:V,mul:X,rotateX:K,rotateY:Q,rotateZ:$,slerp:H,inverse:C,conjugate:J,fromMat:tt,fromEuler:k,copy:O,clone:at,add:mt,subtract:ut,sub:Gt,mulScalar:dt,scale:At,divScalar:ht,dot:et,lerp:Tt,length:st,len:Bt,lengthSq:ft,lenSq:N,normalize:W,equalsApproximately:b,equals:ot,identity:Ft,rotationTo:Et,sqlerp:Rt}}const ln=new Map;function In(u){let p=ln.get(u);return p||(p=En(u),ln.set(u,p)),p}function Un(u){function p(d,n,i,o){const f=new u(4);return d!==void 0&&(f[0]=d,n!==void 0&&(f[1]=n,i!==void 0&&(f[2]=i,o!==void 0&&(f[3]=o)))),f}const m=p;function v(d,n,i,o,f){const w=f??new u(4);return w[0]=d,w[1]=n,w[2]=i,w[3]=o,w}function P(d,n){const i=n??new u(4);return i[0]=Math.ceil(d[0]),i[1]=Math.ceil(d[1]),i[2]=Math.ceil(d[2]),i[3]=Math.ceil(d[3]),i}function B(d,n){const i=n??new u(4);return i[0]=Math.floor(d[0]),i[1]=Math.floor(d[1]),i[2]=Math.floor(d[2]),i[3]=Math.floor(d[3]),i}function U(d,n){const i=n??new u(4);return i[0]=Math.round(d[0]),i[1]=Math.round(d[1]),i[2]=Math.round(d[2]),i[3]=Math.round(d[3]),i}function R(d,n=0,i=1,o){const f=o??new u(4);return f[0]=Math.min(i,Math.max(n,d[0])),f[1]=Math.min(i,Math.max(n,d[1])),f[2]=Math.min(i,Math.max(n,d[2])),f[3]=Math.min(i,Math.max(n,d[3])),f}function V(d,n,i){const o=i??new u(4);return o[0]=d[0]+n[0],o[1]=d[1]+n[1],o[2]=d[2]+n[2],o[3]=d[3]+n[3],o}function X(d,n,i,o){const f=o??new u(4);return f[0]=d[0]+n[0]*i,f[1]=d[1]+n[1]*i,f[2]=d[2]+n[2]*i,f[3]=d[3]+n[3]*i,f}function K(d,n,i){const o=i??new u(4);return o[0]=d[0]-n[0],o[1]=d[1]-n[1],o[2]=d[2]-n[2],o[3]=d[3]-n[3],o}const Q=K;function $(d,n){return Math.abs(d[0]-n[0])<L&&Math.abs(d[1]-n[1])<L&&Math.abs(d[2]-n[2])<L&&Math.abs(d[3]-n[3])<L}function H(d,n){return d[0]===n[0]&&d[1]===n[1]&&d[2]===n[2]&&d[3]===n[3]}function C(d,n,i,o){const f=o??new u(4);return f[0]=d[0]+i*(n[0]-d[0]),f[1]=d[1]+i*(n[1]-d[1]),f[2]=d[2]+i*(n[2]-d[2]),f[3]=d[3]+i*(n[3]-d[3]),f}function J(d,n,i,o){const f=o??new u(4);return f[0]=d[0]+i[0]*(n[0]-d[0]),f[1]=d[1]+i[1]*(n[1]-d[1]),f[2]=d[2]+i[2]*(n[2]-d[2]),f[3]=d[3]+i[3]*(n[3]-d[3]),f}function tt(d,n,i){const o=i??new u(4);return o[0]=Math.max(d[0],n[0]),o[1]=Math.max(d[1],n[1]),o[2]=Math.max(d[2],n[2]),o[3]=Math.max(d[3],n[3]),o}function k(d,n,i){const o=i??new u(4);return o[0]=Math.min(d[0],n[0]),o[1]=Math.min(d[1],n[1]),o[2]=Math.min(d[2],n[2]),o[3]=Math.min(d[3],n[3]),o}function O(d,n,i){const o=i??new u(4);return o[0]=d[0]*n,o[1]=d[1]*n,o[2]=d[2]*n,o[3]=d[3]*n,o}const at=O;function mt(d,n,i){const o=i??new u(4);return o[0]=d[0]/n,o[1]=d[1]/n,o[2]=d[2]/n,o[3]=d[3]/n,o}function ut(d,n){const i=n??new u(4);return i[0]=1/d[0],i[1]=1/d[1],i[2]=1/d[2],i[3]=1/d[3],i}const Gt=ut;function dt(d,n){return d[0]*n[0]+d[1]*n[1]+d[2]*n[2]+d[3]*n[3]}function At(d){const n=d[0],i=d[1],o=d[2],f=d[3];return Math.sqrt(n*n+i*i+o*o+f*f)}const ht=At;function et(d){const n=d[0],i=d[1],o=d[2],f=d[3];return n*n+i*i+o*o+f*f}const Tt=et;function st(d,n){const i=d[0]-n[0],o=d[1]-n[1],f=d[2]-n[2],w=d[3]-n[3];return Math.sqrt(i*i+o*o+f*f+w*w)}const Bt=st;function ft(d,n){const i=d[0]-n[0],o=d[1]-n[1],f=d[2]-n[2],w=d[3]-n[3];return i*i+o*o+f*f+w*w}const N=ft;function W(d,n){const i=n??new u(4),o=d[0],f=d[1],w=d[2],g=d[3],x=Math.sqrt(o*o+f*f+w*w+g*g);return x>1e-5?(i[0]=o/x,i[1]=f/x,i[2]=w/x,i[3]=g/x):(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function b(d,n){const i=n??new u(4);return i[0]=-d[0],i[1]=-d[1],i[2]=-d[2],i[3]=-d[3],i}function ot(d,n){const i=n??new u(4);return i[0]=d[0],i[1]=d[1],i[2]=d[2],i[3]=d[3],i}const Ft=ot;function Z(d,n,i){const o=i??new u(4);return o[0]=d[0]*n[0],o[1]=d[1]*n[1],o[2]=d[2]*n[2],o[3]=d[3]*n[3],o}const It=Z;function wt(d,n,i){const o=i??new u(4);return o[0]=d[0]/n[0],o[1]=d[1]/n[1],o[2]=d[2]/n[2],o[3]=d[3]/n[3],o}const Et=wt;function nt(d){const n=d??new u(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function Lt(d,n,i){const o=i??new u(4),f=d[0],w=d[1],g=d[2],x=d[3];return o[0]=n[0]*f+n[4]*w+n[8]*g+n[12]*x,o[1]=n[1]*f+n[5]*w+n[9]*g+n[13]*x,o[2]=n[2]*f+n[6]*w+n[10]*g+n[14]*x,o[3]=n[3]*f+n[7]*w+n[11]*g+n[15]*x,o}function Rt(d,n,i){const o=i??new u(4);return W(d,o),O(o,n,o)}function y(d,n,i){const o=i??new u(4);return At(d)>n?Rt(d,n,o):ot(d,o)}function S(d,n,i){const o=i??new u(4);return C(d,n,.5,o)}return{create:p,fromValues:m,set:v,ceil:P,floor:B,round:U,clamp:R,add:V,addScaled:X,subtract:K,sub:Q,equalsApproximately:$,equals:H,lerp:C,lerpV:J,max:tt,min:k,mulScalar:O,scale:at,divScalar:mt,inverse:ut,invert:Gt,dot:dt,length:At,len:ht,lengthSq:et,lenSq:Tt,distance:st,dist:Bt,distanceSq:ft,distSq:N,normalize:W,negate:b,copy:ot,clone:Ft,multiply:Z,mul:It,divide:wt,div:Et,zero:nt,transformMat4:Lt,setLength:Rt,truncate:y,midpoint:S}}const dn=new Map;function qn(u){let p=dn.get(u);return p||(p=Un(u),dn.set(u,p)),p}function tn(u,p,m,v,P,B){return{mat3:Tn(u),mat4:Fn(p),quat:In(m),vec2:yn(v),vec3:_t(P),vec4:qn(B)}}const{mat4:_,vec3:kt}=tn(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);tn(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);tn(vn,Array,Array,Array,Array,Array);class Vn{map=new Map;add(p){this.map.set(p.id,p)}get(p){return this.map.get(p)?.resource}list(){return Array.from(this.map.values())}async disposeAll(){for(const p of this.map.values())await p.dispose?.();this.map.clear()}}function Ln(){return new Vn}const Rn={async init(u={}){if(!("gpu"in navigator))throw new Error("WebGPU is not available in this environment.");const p=await navigator.gpu.requestAdapter({featureLevel:"compatibility"});if(!p)throw new Error("Unable to acquire a GPU adapter.");try{const m=await p.requestDevice({requiredFeatures:u.requiredFeatures,requiredLimits:u.requiredLimits}),v=m.queue,P=m.limits,B=[];if(u.onError){const R=V=>{u.onError?.(V.error)};m.addEventListener("uncapturederror",R),B.push(()=>m.removeEventListener("uncapturederror",R)),m.lost.then(V=>{u.onError?.(new Error(`Device lost (${V.reason}): ${V.message}`))}).catch(()=>{})}return{adapter:p,device:m,queue:v,limits:P,async configureSurface(R){const V=u.canvas;if(!V)throw new Error("DeviceHost options.canvas is required to configure a surface.");R.configure({device:m,canvas:V,format:u.surfaceConfig?.format,depthFormat:u.surfaceConfig?.depthFormat,sizeProvider:u.surfaceConfig?.sizeProvider})},createResourceRegistry(){return Ln()},async dispose(){for(const R of B.splice(0,B.length))await R();typeof m.destroy=="function"&&m.destroy()}}}catch(m){throw u.onError?.(m instanceof Error?m:new Error("Failed to initialize GPU device.")),m}}};class bn{config;context;depthTexture;currentSize;internalFormat=navigator.gpu.getPreferredCanvasFormat();internalDepthFormat;get format(){return this.internalFormat}get depthFormat(){return this.internalDepthFormat}configure(p){this.config=p,this.context=p.canvas.getContext("webgpu"),this.internalFormat=p.format??navigator.gpu.getPreferredCanvasFormat(),this.internalDepthFormat=p.depthFormat,this.resize()}acquireFrame(){if(!this.config||!this.context||!this.currentSize)throw new Error("Surface not configured.");const p=this.context.getCurrentTexture().createView(),m=this.depthTexture?.createView();return{colorView:p,depthView:m,presentationFormat:this.internalFormat,size:this.currentSize}}resize(){if(!this.config||!this.context)return;const p=window.devicePixelRatio||1,m=this.config.sizeProvider?.(),v=(m?.width??this.config.canvas.clientWidth)*p,P=(m?.height??this.config.canvas.clientHeight)*p;this.config.canvas.width=v,this.config.canvas.height=P,this.context.configure({device:this.config.device,format:this.internalFormat}),this.internalDepthFormat&&(this.depthTexture?.destroy(),this.depthTexture=this.config.device.createTexture({size:[v,P,1],format:this.internalDepthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT})),this.currentSize={width:v,height:P,devicePixelRatio:p}}dispose(){this.depthTexture?.destroy(),this.depthTexture=void 0,this.context=void 0,this.config=void 0,this.currentSize=void 0}}const Wn=40,Zn=0,Nn=32,On=36,hn=new Float32Array([1,-1,1,1,1,0,1,1,0,1,-1,-1,1,1,0,0,1,1,1,1,-1,-1,-1,1,0,0,0,1,1,0,1,-1,-1,1,1,0,0,1,0,0,1,-1,1,1,1,0,1,1,0,1,-1,-1,-1,1,0,0,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,-1,1,1,1,0,1,1,1,1,1,-1,-1,1,1,0,0,1,1,0,1,1,-1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,0,1,1,-1,-1,1,1,0,0,1,1,0,-1,1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,1,1,1,0,1,1,0,-1,1,-1,1,0,1,0,1,0,0,-1,1,1,1,0,1,1,1,0,1,1,1,-1,1,1,1,0,1,1,0,-1,-1,1,1,0,0,1,1,0,1,-1,1,1,1,0,1,1,1,1,1,-1,1,-1,1,0,1,0,1,1,0,-1,-1,-1,1,0,0,0,1,0,0,-1,-1,1,1,0,0,1,1,0,1,-1,1,-1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,-1,1,1,1,0,1,1,1,1,1,-1,-1,1,1,0,0,1,1,1,0,-1,-1,1,1,0,0,1,1,1,0,1,-1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,-1,-1,1,1,0,0,1,0,1,-1,-1,-1,1,0,0,0,1,1,1,-1,1,-1,1,0,1,0,1,1,0,1,1,-1,1,1,1,0,1,0,0,1,-1,-1,1,1,0,0,1,0,1,-1,1,-1,1,0,1,0,1,1,0]),Xn=`// Positions for simple quad geometry\r
const pos = array(vec2f(0, -1), vec2f(1, -1), vec2f(0, 0), vec2f(1, 0));\r
\r
struct VertexInput {\r
  @builtin(vertex_index) vertex : u32,\r
  @builtin(instance_index) instance : u32,\r
};\r
\r
struct VertexOutput {\r
  @builtin(position) position : vec4f,\r
  @location(0) texcoord : vec2f,\r
};\r
\r
struct Char {\r
  texOffset: vec2f,\r
  texExtent: vec2f,\r
  size: vec2f,\r
  offset: vec2f,\r
};\r
\r
struct FormattedText {\r
  transform: mat4x4f,\r
  color: vec4f,\r
  scale: f32,\r
  chars: array<vec3f>,\r
};\r
\r
struct Camera {\r
  projection: mat4x4f,\r
  view: mat4x4f,\r
};\r
\r
// Font bindings\r
@group(0) @binding(0) var fontTexture: texture_2d<f32>;\r
@group(0) @binding(1) var fontSampler: sampler;\r
@group(0) @binding(2) var<storage> chars: array<Char>;\r
\r
// Text bindings\r
@group(1) @binding(0) var<uniform> camera: Camera;\r
@group(1) @binding(1) var<storage> text: FormattedText;\r
\r
@vertex\r
fn vertexMain(input : VertexInput) -> VertexOutput {\r
  let textElement = text.chars[input.instance];\r
  let char = chars[u32(textElement.z)];\r
  let charPos = (pos[input.vertex] * char.size + textElement.xy + char.offset) * text.scale;\r
\r
  var output : VertexOutput;\r
  output.position = camera.projection * camera.view * text.transform * vec4f(charPos, 0, 1);\r
\r
  output.texcoord = pos[input.vertex] * vec2f(1, -1);\r
  output.texcoord *= char.texExtent;\r
  output.texcoord += char.texOffset;\r
  return output;\r
}\r
\r
fn sampleMsdf(texcoord: vec2f) -> f32 {\r
  let c = textureSample(fontTexture, fontSampler, texcoord);\r
  return max(min(c.r, c.g), min(max(c.r, c.g), c.b));\r
}\r
\r
// Antialiasing technique from Paul Houx \r
// https://github.com/Chlumsky/msdfgen/issues/22#issuecomment-234958005\r
@fragment\r
fn fragmentMain(input : VertexOutput) -> @location(0) vec4f {\r
  // pxRange (AKA distanceRange) comes from the msdfgen tool. Don McCurdy's tool\r
  // uses the default which is 4.\r
  let pxRange = 4.0;\r
  let sz = vec2f(textureDimensions(fontTexture, 0));\r
  let dx = sz.x*length(vec2f(dpdxFine(input.texcoord.x), dpdyFine(input.texcoord.x)));\r
  let dy = sz.y*length(vec2f(dpdxFine(input.texcoord.y), dpdyFine(input.texcoord.y)));\r
  let toPixels = pxRange * inverseSqrt(dx * dx + dy * dy);\r
  let sigDist = sampleMsdf(input.texcoord) - 0.5;\r
  let pxDist = sigDist * toPixels;\r
\r
  let edgeWidth = 0.5;\r
\r
  let alpha = smoothstep(-edgeWidth, edgeWidth, pxDist);\r
\r
  if (alpha < 0.001) {\r
    discard;\r
  }\r
\r
  return vec4f(text.color.rgb, text.color.a * alpha);\r
}`;class Hn{constructor(p,m,v,P,B){this.pipeline=p,this.bindGroup=m,this.lineHeight=v,this.chars=P,this.kernings=B;const U=Object.values(P);this.charCount=U.length,this.defaultChar=U[0]}charCount;defaultChar;getChar(p){let m=this.chars[p];return m||(m=this.defaultChar),m}getXAdvance(p,m=-1){const v=this.getChar(p);if(m>=0){const P=this.kernings.get(p);if(P)return v.xadvance+(P.get(m)??0)}return v.xadvance}}class Yn{constructor(p,m,v,P,B){this.device=p,this.renderBundle=m,this.measurements=v,this.font=P,this.textBuffer=B,_.identity(this.bufferArray),this.setColor(1,1,1,1),this.setPixelScale(1/512),this.bufferArrayDirty=!0}bufferArray=new Float32Array(24);bufferArrayDirty=!0;getRenderBundle(){return this.bufferArrayDirty&&(this.bufferArrayDirty=!1,this.device.queue.writeBuffer(this.textBuffer,0,this.bufferArray.buffer,this.bufferArray.byteOffset,this.bufferArray.byteLength)),this.renderBundle}setTransform(p){_.copy(p,this.bufferArray),this.bufferArrayDirty=!0}setColor(p,m,v,P=1){this.bufferArray[16]=p,this.bufferArray[17]=m,this.bufferArray[18]=v,this.bufferArray[19]=P,this.bufferArrayDirty=!0}setPixelScale(p){this.bufferArray[20]=p,this.bufferArrayDirty=!0}}class $n{constructor(p,m,v){this.device=p,this.renderBundleDescriptor={colorFormats:[m],depthStencilFormat:v},this.sampler=p.createSampler({label:"MSDF text sampler",minFilter:"linear",magFilter:"linear",mipmapFilter:"linear",maxAnisotropy:16}),this.cameraUniformBuffer=p.createBuffer({label:"MSDF camera uniform buffer",size:this.cameraArray.byteLength,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM}),this.fontBindGroupLayout=p.createBindGroupLayout({label:"MSDF font group layout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:2,visibility:GPUShaderStage.VERTEX,buffer:{type:"read-only-storage"}}]}),this.textBindGroupLayout=p.createBindGroupLayout({label:"MSDF text group layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{}},{binding:1,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}}]});const P=p.createShaderModule({label:"MSDF text shader",code:Xn});this.pipelinePromise=p.createRenderPipelineAsync({label:"msdf text pipeline",layout:p.createPipelineLayout({bindGroupLayouts:[this.fontBindGroupLayout,this.textBindGroupLayout]}),vertex:{module:P,entryPoint:"vertexMain"},fragment:{module:P,entryPoint:"fragmentMain",targets:[{format:m,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip",stripIndexFormat:"uint32"},depthStencil:{depthWriteEnabled:!1,depthCompare:"less",format:v}})}fontBindGroupLayout;textBindGroupLayout;pipelinePromise;sampler;cameraUniformBuffer;renderBundleDescriptor;cameraArray=new Float32Array(32);async loadTexture(p){const m=await fetch(p),v=await createImageBitmap(await m.blob()),P=this.device.createTexture({label:`MSDF font texture ${p}`,size:[v.width,v.height,1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT});return this.device.queue.copyExternalImageToTexture({source:v},{texture:P},[v.width,v.height]),P}async createFont(p){const v=await(await fetch(p)).json(),P=p.lastIndexOf("/"),B=P!==-1?p.substring(0,P+1):void 0,U=[];for(const k of v.pages)U.push(this.loadTexture(B+k));const R=v.chars.length,V=this.device.createBuffer({label:"MSDF character layout buffer",size:R*Float32Array.BYTES_PER_ELEMENT*8,usage:GPUBufferUsage.STORAGE,mappedAtCreation:!0}),X=new Float32Array(V.getMappedRange()),K=1/v.common.scaleW,Q=1/v.common.scaleH,$={};let H=0;for(const[k,O]of v.chars.entries())$[O.id]=O,$[O.id].charIndex=k,X[H]=O.x*K,X[H+1]=O.y*Q,X[H+2]=O.width*K,X[H+3]=O.height*Q,X[H+4]=O.width,X[H+5]=O.height,X[H+6]=O.xoffset,X[H+7]=-O.yoffset,H+=8;V.unmap();const C=await Promise.all(U),J=this.device.createBindGroup({label:"msdf font bind group",layout:this.fontBindGroupLayout,entries:[{binding:0,resource:C[0].createView()},{binding:1,resource:this.sampler},{binding:2,resource:{buffer:V}}]}),tt=new Map;if(v.kernings)for(const k of v.kernings){let O=tt.get(k.first);O||(O=new Map,tt.set(k.first,O)),O.set(k.second,k.amount)}return new Hn(await this.pipelinePromise,J,v.common.lineHeight,$,tt)}formatText(p,m,v={}){const P=this.device.createBuffer({label:"msdf text buffer",size:(m.length+6)*Float32Array.BYTES_PER_ELEMENT*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0}),B=new Float32Array(P.getMappedRange());let U=24,R;v.centered?(R=this.measureText(p,m),this.measureText(p,m,($,H,C,J)=>{const tt=R.width*-.5-(R.width-R.lineWidths[C])*-.5;B[U]=$+tt,B[U+1]=H+R.height*.5,B[U+2]=J.charIndex,U+=4})):R=this.measureText(p,m,($,H,C,J)=>{B[U]=$,B[U+1]=H,B[U+2]=J.charIndex,U+=4}),P.unmap();const V=this.device.createBindGroup({label:"msdf text bind group",layout:this.textBindGroupLayout,entries:[{binding:0,resource:{buffer:this.cameraUniformBuffer}},{binding:1,resource:{buffer:P}}]}),X=this.device.createRenderBundleEncoder(this.renderBundleDescriptor);X.setPipeline(p.pipeline),X.setBindGroup(0,p.bindGroup),X.setBindGroup(1,V),X.draw(4,R.printedCharCount);const K=X.finish(),Q=new Yn(this.device,K,R,p,P);return v.pixelScale!==void 0&&Q.setPixelScale(v.pixelScale),v.color!==void 0&&Q.setColor(...v.color),Q}measureText(p,m,v){let P=0;const B=[];let U=0,R=0,V=0,X=0,K=m.charCodeAt(0);for(let Q=0;Q<m.length;++Q){const $=K;switch(K=Q<m.length-1?m.charCodeAt(Q+1):-1,$){case 10:B.push(U),V++,P=Math.max(P,U),U=0,R-=p.lineHeight;case 13:break;case 32:U+=p.getXAdvance($);break;default:v&&v(U,R,V,p.getChar($)),U+=p.getXAdvance($,K),X++}}return B.push(U),P=Math.max(P,U),{width:P,height:B.length*p.lineHeight,lineWidths:B,printedCharCount:X}}updateCamera(p,m){this.cameraArray.set(p,0),this.cameraArray.set(m,16),this.device.queue.writeBuffer(this.cameraUniformBuffer,0,this.cameraArray.buffer,0,this.cameraArray.byteLength)}render(p,...m){const v=m.map(P=>P.getRenderBundle());p.executeBundles(v)}}globalThis.addEventListener("unhandledrejection",u=>{bt(`unhandled promise rejection, please report a bug!
  https://github.com/webgpu/webgpu-samples/issues/new
${u.reason}`)});globalThis.addEventListener("error",u=>{bt(`uncaught exception, please report a bug!
  https://github.com/webgpu/webgpu-samples/issues/new
${u.error}`)});function Qn(u){"gpu"in navigator||bt("navigator.gpu is not defined - WebGPU not available in this browser"),u||bt("requestAdapter returned null - this sample can't run on this system")}function jn(u,p){if(!p){Qn(u),bt("Unable to get a device for an unknown reason");return}p.lost.then(m=>{bt(`Device lost ("${m.reason}"):
${m.message}`)}),p.addEventListener("uncapturederror",m=>{bt(`Uncaptured error:
${m.error.message}`)})}const bt=(()=>{function u(){if(typeof document>"u")return{show(B){console.error(B)}};const m=document.createElement("dialog");m.close(),document.body.append(m);const v=document.createElement("pre");v.style.whiteSpace="pre-wrap",m.append(v);const P=document.createElement("button");return P.textContent="OK",P.onclick=()=>m.close(),m.append(P),{show(B){m.open||(v.textContent=B,m.showModal())}}}let p;return m=>{throw p||(p=u()),p.show(m),new Error(m)}})();let Nt;async function Kn(u){Nt&&(await Nt(),Nt=void 0);const p=[],m=document.createElement("div");m.className="scene msdf-text-scene",u.appendChild(m),p.push(()=>m.remove());const v=document.createElement("canvas");v.className="scene-canvas",m.appendChild(v);const P=document.createElement("div");P.className="info",P.textContent="Mini GFX MSDF sandbox",m.appendChild(P);const B=await Rn.init({canvas:v,requiredLimits:{maxStorageBuffersInFragmentStage:1,maxStorageBuffersInVertexStage:2},onError:Z=>console.error("[mini-gfx] WebGPU error:",Z),surfaceConfig:{depthFormat:"depth24plus"}});jn(B.adapter,B.device);const U=new bn;await B.configureSurface(U);const R=()=>U.resize();window.addEventListener("resize",R),p.push(()=>window.removeEventListener("resize",R));const V=B.device,X=B.queue,K=U.format,Q=U.depthFormat??"depth24plus",$=new $n(V,K,Q),H=await $.createFont(new URL("/assets/ya-hei-ascii-msdf-BNsUZnRi.json",import.meta.url).toString()),C=_n($,H),J=$.formatText(H,"WebGPU",{centered:!0,pixelScale:1/128}),tt=kn($,H),k=[...C,J,tt],O=await wn(new URL("data:text/wgsl;base64,c3RydWN0IFVuaWZvcm1zIHsNCiAgbW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCA6IG1hdDR4NGYsDQp9DQpAYmluZGluZygwKSBAZ3JvdXAoMCkgdmFyPHVuaWZvcm0+IHVuaWZvcm1zIDogVW5pZm9ybXM7DQoNCnN0cnVjdCBWZXJ0ZXhPdXRwdXQgew0KICBAYnVpbHRpbihwb3NpdGlvbikgUG9zaXRpb24gOiB2ZWM0ZiwNCiAgQGxvY2F0aW9uKDApIGZyYWdVViA6IHZlYzJmLA0KICBAbG9jYXRpb24oMSkgZnJhZ1Bvc2l0aW9uOiB2ZWM0ZiwNCn0NCg0KQHZlcnRleA0KZm4gbWFpbigNCiAgQGxvY2F0aW9uKDApIHBvc2l0aW9uIDogdmVjNGYsDQogIEBsb2NhdGlvbigxKSB1diA6IHZlYzJmDQopIC0+IFZlcnRleE91dHB1dCB7DQogIHZhciBvdXRwdXQgOiBWZXJ0ZXhPdXRwdXQ7DQogIG91dHB1dC5Qb3NpdGlvbiA9IHVuaWZvcm1zLm1vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggKiBwb3NpdGlvbjsNCiAgb3V0cHV0LmZyYWdVViA9IHV2Ow0KICBvdXRwdXQuZnJhZ1Bvc2l0aW9uID0gMC41ICogKHBvc2l0aW9uICsgdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApKTsNCiAgcmV0dXJuIG91dHB1dDsNCn0NCg==",import.meta.url)),at=await wn(new URL("data:text/wgsl;base64,QGZyYWdtZW50DQpmbiBtYWluKA0KICBAbG9jYXRpb24oMCkgZnJhZ1VWOiB2ZWMyZiwNCiAgQGxvY2F0aW9uKDEpIGZyYWdQb3NpdGlvbjogdmVjNGYNCikgLT4gQGxvY2F0aW9uKDApIHZlYzRmIHsNCiAgcmV0dXJuIGZyYWdQb3NpdGlvbjsNCn0NCg==",import.meta.url)),mt=V.createRenderPipeline({layout:"auto",vertex:{module:V.createShaderModule({code:O}),buffers:[{arrayStride:Wn,attributes:[{shaderLocation:0,offset:Zn,format:"float32x4"},{shaderLocation:1,offset:Nn,format:"float32x2"}]}]},fragment:{module:V.createShaderModule({code:at}),targets:[{format:K}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:Q}}),ut=V.createBuffer({size:hn.byteLength,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0});new Float32Array(ut.getMappedRange()).set(hn),ut.unmap();const dt=V.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),At=V.createBindGroup({layout:mt.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:dt}}]}),ht=_.create(),et=_.create(),Tt=_.create(),st=_.create(),Bt=_.create(),ft=[Wt([0,0,1.1]),Wt([0,0,-1.1],[0,Math.PI,0]),Wt([1.1,0,0],[0,Math.PI/2,0]),Wt([-1.1,0,0],[0,-Math.PI/2,0]),Wt([0,1.1,0],[-Math.PI/2,0,0]),Wt([0,-1.1,0],[Math.PI/2,0,0])],N=performance.now();let W=0;const b=()=>{W=requestAnimationFrame(b);const Z=U.acquireFrame();Jn(Z,ht,et,Tt,st),X.writeBuffer(dt,0,st.buffer,st.byteOffset,st.byteLength),Cn(ft,C,Tt,Bt),te(J,tt,N,Bt),$.updateCamera(ht,et);const It={view:Z.colorView,clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"},wt=Z.depthView?{view:Z.depthView,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}:void 0,Et=V.createCommandEncoder(),nt=Et.beginRenderPass({colorAttachments:[It],depthStencilAttachment:wt});nt.setPipeline(mt),nt.setBindGroup(0,At),nt.setVertexBuffer(0,ut),nt.draw(On,1,0,0),$.render(nt,...k),nt.end(),X.submit([Et.finish()])};W=requestAnimationFrame(b),p.push(()=>cancelAnimationFrame(W));const ot=async()=>{ut.destroy(),dt.destroy(),k.forEach(Z=>Z.textBuffer.destroy()),U.dispose(),await B.dispose()};window.addEventListener("beforeunload",ot),p.push(()=>window.removeEventListener("beforeunload",ot)),p.push(()=>void ot());const Ft=async()=>{for(const Z of p.splice(0))await Z();Nt=void 0};return Nt=Ft,Ft}const Mn={id:"msdf-text",title:"MSDF Text Showcase",async mount({root:u}){const p=await Kn(u);return typeof p=="function"?()=>p():p}};function _n(u,p){return[u.formatText(p,"Front",{centered:!0,pixelScale:1/128,color:[1,0,0,1]}),u.formatText(p,"Back",{centered:!0,pixelScale:1/128,color:[0,1,1,1]}),u.formatText(p,"Right",{centered:!0,pixelScale:1/128,color:[0,1,0,1]}),u.formatText(p,"Left",{centered:!0,pixelScale:1/128,color:[1,0,1,1]}),u.formatText(p,"Top",{centered:!0,pixelScale:1/128,color:[0,0,1,1]}),u.formatText(p,"Bottom",{centered:!0,pixelScale:1/128,color:[1,1,0,1]})]}function kn(u,p){return u.formatText(p,`
WebGPU exposes an API for performing operations, such as rendering
and computation, on a Graphics Processing Unit.

Graphics Processing Units, or GPUs for short, have been essential
in enabling rich rendering and computational applications in personal
computing. WebGPU is an API that exposes the capabilities of GPU
hardware for the Web. The API is designed from the ground up to
efficiently map to (post-2014) native GPU APIs. WebGPU is not related
to WebGL and does not explicitly target OpenGL ES.

WebGPU sees physical GPU hardware as GPUAdapters. It provides a
connection to an adapter via GPUDevice, which manages resources, and
the device's GPUQueues, which execute commands. GPUDevice may have
its own memory with high-speed access to the processing units.
GPUBuffer and GPUTexture are the physical resources backed by GPU
memory. GPUCommandBuffer and GPURenderBundle are containers for
user-recorded commands. GPUShaderModule contains shader code. The
other resources, such as GPUSampler or GPUBindGroup, configure the
way physical resources are used by the GPU.

GPUs execute commands encoded in GPUCommandBuffers by feeding data
through a pipeline, which is a mix of fixed-function and programmable
stages. Programmable stages execute shaders, which are special
programs designed to run on GPU hardware. Most of the state of a
pipeline is defined by a GPURenderPipeline or a GPUComputePipeline
object. The state not included in these pipeline objects is set
during encoding with commands, such as beginRenderPass() or
setBlendConstant().`,{pixelScale:1/256})}function Jn(u,p,m,v,P){const B=u.size.width/u.size.height,U=_.perspective(2*Math.PI/5,B,1,100);p.set(U),_.identity(m),_.translate(m,kt.fromValues(0,0,-5),m);const R=performance.now()/5e3;_.identity(v),_.translate(v,kt.fromValues(0,2,-3),v),_.rotate(v,kt.fromValues(Math.sin(R),Math.cos(R),0),1,v),_.multiply(p,m,P),_.multiply(P,v,P)}function Cn(u,p,m,v){u.forEach((P,B)=>{_.multiply(m,P,v),p[B].setTransform(v)})}function te(u,p,m,v){const P=(performance.now()-m)/2500%14;_.identity(v),_.rotateX(v,-Math.PI/8,v),_.translate(v,[0,P-3,0],v),u.setTransform(v),_.translate(v,[-3,-.1,0],v),p.setTransform(v)}function Wt(u,p){const m=_.identity(_.create());return _.translate(m,u,m),p&&(p[0]&&_.rotateX(m,p[0],m),p[1]&&_.rotateY(m,p[1],m),p[2]&&_.rotateZ(m,p[2],m)),m}async function wn(u){const p=await fetch(u.toString());if(!p.ok)throw new Error(`Failed to load shader at ${u.href}`);return p.text()}const Jt=[Mn],Dn=Mn.id;function pn(u){return Jt.find(p=>p.id===u)}let nn=Dn,Kt,gn=0;function mn(u){const p=document.getElementById(u);if(!p)throw new Error(`Element with id "${u}" was not found.`);return p}const Ct=mn("scene-root"),Zt=mn("scene-select");function xn(u){return typeof u=="function"?u:void 0}function ne(u){Zt.innerHTML="",Jt.forEach(p=>{const m=document.createElement("option");m.value=p.id,m.textContent=p.title,m.selected=p.id===u,Zt.appendChild(m)}),Zt.disabled=Jt.length<=1}async function ee(){if(Kt){const u=Kt;Kt=void 0,await u()}Ct.innerHTML=""}async function An(u){const p=pn(u)??pn(Dn);if(!p)throw new Error(`Unable to resolve scene for id "${u}"`);const m=++gn;await ee(),nn=p.id,Zt.value=p.id;const v={root:Ct};try{const P=await p.mount(v);if(m!==gn){const B=xn(P);B&&await B();return}Kt=xn(P)}catch(P){console.error(`[mini-gfx] failed to mount scene "${p.id}"`,P),Ct.innerHTML=""}}Zt.addEventListener("change",()=>{const u=Zt.value;An(u)});ne(nn);An(nn);
